import{r as i,c as X,E as v,u as Q,a as S,g as E,j as p,m as b,_ as h,b as y,d as q,o as k,e as D,f as n,F as Y,h as T,i as ee,k as oe,l as te,n as re,p as B,R as se,q as ne,s as I,t as F,v as ae,w as ie,C as le,B as ce,A as de,x as _}from"./index.292757b7.js";import{D as ue,C as pe,c as me,a as z,u as ge,K as A,b as fe,A as be,d as ve}from"./useAuthenticationServices.28575415.js";import{B as he}from"./Banner.78033cf6.js";import{d as ye}from"./encryptDecrypt.03cbd913.js";import{I as Te}from"./chunk-2.6c33ca0b.js";const L=i.exports.createContext(void 0),Ne=L.Provider;function O(){return i.exports.useContext(L)}const xe=X("WarningFilled","1em",["M8.68 2.79a1.5 1.5 0 0 1 2.64 0l6.5 12A1.5 1.5 0 0 1 16.5 17h-13a1.5 1.5 0 0 1-1.32-2.21l6.5-12ZM10.5 7.5a.5.5 0 0 0-1 0v4a.5.5 0 0 0 1 0v-4Zm.25 6.25a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0Z"]);let ke=0;function Se(e,t={},o){var r;const u={...t,content:e,toastId:(r=t.toastId)!==null&&r!==void 0?r:(ke++).toString()},c=new CustomEvent(v.show,{bubbles:!1,cancelable:!1,detail:u});o.dispatchEvent(c)}function Ee(e,t=void 0,o){const r=new CustomEvent(v.dismiss,{bubbles:!1,cancelable:!1,detail:{toastId:e,toasterId:t}});o.dispatchEvent(r)}function we(e=void 0,t){const o=new CustomEvent(v.dismissAll,{bubbles:!1,cancelable:!1,detail:{toasterId:e}});t.dispatchEvent(o)}function Ce(e,t){const o=new CustomEvent(v.update,{bubbles:!1,cancelable:!1,detail:e});t.dispatchEvent(o)}function Be(e,t=void 0,o){const r=new CustomEvent(v.pause,{bubbles:!1,cancelable:!1,detail:{toastId:e,toasterId:t}});o.dispatchEvent(r)}function Ie(e,t=void 0,o){const r=new CustomEvent(v.play,{bubbles:!1,cancelable:!1,detail:{toastId:e,toasterId:t}});o.dispatchEvent(r)}const f=()=>{};function Fe(e){const{targetDocument:t}=Q();return i.exports.useMemo(()=>t?{dispatchToast:(o,r)=>{Se(o,{...r,toasterId:e,data:{root:r==null?void 0:r.root}},t)},dismissToast:o=>{Ee(o,e,t)},dismissAllToasts:()=>{we(e,t)},updateToast:o=>{Ce({...o,data:{root:o.root},toasterId:e},t)},pauseToast:o=>{Be(o,e,t)},playToast:o=>{Ie(o,e,t)}}:{dispatchToast:f,dismissToast:f,dismissAllToasts:f,updateToast:f,pauseToast:f,playToast:f},[t,e])}const _e=(e,t)=>({components:{root:"div"},root:S(E("div",{ref:t,...e}),{elementType:"div"}),backgroundAppearance:e.appearance}),ze=(e,t)=>p(Ne,{value:t.backgroundAppearance,children:p(e.root,{})}),Ae={root:"fui-Toast"},je=h("r1yngb2j",null,[".r1yngb2j{display:grid;grid-template-columns:auto 1fr auto;padding:12px 12px;border-radius:var(--borderRadiusMedium);border:1px solid var(--colorTransparentStroke);box-shadow:var(--shadow8);font-size:var(--fontSizeBase300);line-height:20px;font-weight:var(--fontWeightSemibold);color:var(--colorNeutralForeground1);background-color:var(--colorNeutralBackground1);}"]),Re=y({inverted:{sj55zd:"f1w7i9ko",De3pzq:"f5pduvr"}},{d:[".f1w7i9ko{color:var(--colorNeutralForegroundInverted2);}",".f5pduvr{background-color:var(--colorNeutralBackgroundInverted);}"]}),qe=e=>{const t=je(),o=Re();return e.root.className=b(Ae.root,t,e.backgroundAppearance==="inverted"&&o.inverted,e.root.className),e};function De(e){const{backgroundAppearance:t}=e;return{backgroundAppearance:t}}const P=i.exports.forwardRef((e,t)=>{const o=_e(e,t);return qe(o),ze(o,De(o))});P.displayName="Toast";const Le=(e,t)=>{const{intent:o,titleId:r}=q(),u=O();let c;switch(o){case"success":c=i.exports.createElement(pe,null);break;case"error":c=i.exports.createElement(ue,null);break;case"warning":c=i.exports.createElement(xe,null);break;case"info":c=i.exports.createElement(Te,null);break}return{action:k(e.action,{elementType:"div"}),components:{root:"div",media:"div",action:"div"},media:k(e.media,{renderByDefault:!!o,defaultProps:{children:c},elementType:"div"}),root:S(E("div",{ref:t,children:e.children,id:r,...e}),{elementType:"div"}),intent:o,backgroundAppearance:u}},Oe=e=>D(i.exports.Fragment,{children:[e.media?p(e.media,{}):null,p(e.root,{}),e.action?p(e.action,{}):null]}),x={root:"fui-ToastTitle",media:"fui-ToastTitle__media",action:"fui-ToastTitle__action"},Pe=h("rdjap1e",null,[".rdjap1e{display:flex;grid-column-end:3;color:var(--colorNeutralForeground1);word-break:break-word;}"]),Me=h("r8x5mrd","r1soj19y",[".r8x5mrd{display:flex;padding-top:2px;grid-column-end:2;padding-right:8px;font-size:16px;color:var(--colorNeutralForeground1);}",".r1soj19y{display:flex;padding-top:2px;grid-column-end:2;padding-left:8px;font-size:16px;color:var(--colorNeutralForeground1);}"]),Ge=h("r2j19ip","rjfozdo",[".r2j19ip{display:flex;align-items:start;padding-left:12px;grid-column-end:-1;color:var(--colorBrandForeground1);}",".rjfozdo{display:flex;align-items:start;padding-right:12px;grid-column-end:-1;color:var(--colorBrandForeground1);}"]),Ve=y({root:{sj55zd:"f1w7i9ko"},action:{sj55zd:"f1qz2gb0"},media:{sj55zd:"fqpbvvt"}},{d:[".f1w7i9ko{color:var(--colorNeutralForegroundInverted2);}",".f1qz2gb0{color:var(--colorBrandForegroundInverted);}",".fqpbvvt{color:var(--colorNeutralForegroundInverted);}"]}),We=y({success:{sj55zd:"f36rra6"},error:{sj55zd:"f1ca9wz"},warning:{sj55zd:"f13isgzr"},info:{sj55zd:"fkfq4zb"}},{d:[".f36rra6{color:var(--colorStatusSuccessForeground1);}",".f1ca9wz{color:var(--colorStatusDangerForeground1);}",".f13isgzr{color:var(--colorStatusWarningForeground1);}",".fkfq4zb{color:var(--colorNeutralForeground2);}"]}),$e=y({success:{sj55zd:"ff3wk4x"},error:{sj55zd:"fbq2gqr"},warning:{sj55zd:"fx6hq1t"},info:{sj55zd:"f1w7i9ko"}},{d:[".ff3wk4x{color:var(--colorStatusSuccessForegroundInverted);}",".fbq2gqr{color:var(--colorStatusDangerForegroundInverted);}",".fx6hq1t{color:var(--colorStatusWarningForegroundInverted);}",".f1w7i9ko{color:var(--colorNeutralForegroundInverted2);}"]}),Ue=e=>{const t=Pe(),o=Ge(),r=Me(),u=We(),c=$e(),{intent:m}=e,g=Ve();return e.root.className=b(x.root,t,e.backgroundAppearance==="inverted"&&g.root,e.root.className),e.media&&(e.media.className=b(x.media,r,e.backgroundAppearance==="inverted"&&g.media,e.media.className,m&&u[m],m&&e.backgroundAppearance==="inverted"&&c[m])),e.action&&(e.action.className=b(x.action,o,e.backgroundAppearance==="inverted"&&g.action,e.action.className)),e},M=i.exports.forwardRef((e,t)=>{const o=Le(e,t);return Ue(o),Oe(o)});M.displayName="ToastTitle";const He=(e,t)=>{const o=O(),{bodyId:r}=q();return{components:{root:"div",subtitle:"div"},subtitle:k(e.subtitle,{elementType:"div"}),root:S(E("div",{ref:t,id:r,...e}),{elementType:"div"}),backgroundAppearance:o}},Je=e=>D(i.exports.Fragment,{children:[p(e.root,{}),e.subtitle?p(e.subtitle,{}):null]}),j={root:"fui-ToastBody",subtitle:"fui-ToastBody__subtitle"},Ze=h("rciajo9",null,[".rciajo9{grid-column-start:2;grid-column-end:3;padding-top:6px;font-size:var(--fontSizeBase300);line-height:var(--fontSizeBase300);font-weight:var(--fontWeightRegular);color:var(--colorNeutralForeground1);word-break:break-word;}"]),Ke=h("rzjw1xk",null,[".rzjw1xk{padding-top:4px;grid-column-start:2;grid-column-end:3;font-size:var(--fontSizeBase200);line-height:var(--fontSizeBase200);font-weight:var(--fontWeightRegular);color:var(--colorNeutralForeground2);}"]),Xe=y({root:{sj55zd:"f1w7i9ko"},subtitle:{sj55zd:"f1w7i9ko"}},{d:[".f1w7i9ko{color:var(--colorNeutralForegroundInverted2);}"]}),Qe=e=>{const t=Ze(),o=Ke(),r=Xe();return e.root.className=b(j.root,t,e.backgroundAppearance==="inverted"&&r.root,e.root.className),e.subtitle&&(e.subtitle.className=b(j.subtitle,o,e.backgroundAppearance==="inverted"&&r.subtitle,e.subtitle.className)),e},G=i.exports.forwardRef((e,t)=>{const o=He(e,t);return Qe(o),Je(o)});G.displayName="ToastBody";const R=({title:e,description:t})=>n(Y,{children:T(P,{children:[n(M,{children:e}),n(G,{children:t})]})}),{useClasses:Ye}=ee(),no=()=>{const e={},t=Ye(),[o,r]=i.exports.useState(["mobile"]),{login:u,userExist:c,sendOtp:m}=ve(),g=oe(),w=te(),N=re(s=>s.auth),{dispatchToast:C}=Fe(de),V=me().shape({mobile:z().min(10,B).max(10,B).matches(se,ne).required(I),pin:z().min(4,F).max(8,F).matches(ae,ie).required(I)}),a=ge({initialValues:{mobile:"",pin:""},validationSchema:V,onSubmit:async s=>{try{let l={phone:s.mobile.toString(),pin:s.pin.toString()};const d=await u(l),Z=ye(d.data),K=JSON.parse(Z);console.log("DEC JSON",K),C(n(R,{title:"Login Successful",description:""}),{intent:"success"})}catch(l){console.log("Login Error - ",l),C(n(R,{title:"Error occured",description:"Please try again after sometime."}),{intent:"error"})}}}),W=async s=>{try{let l={phone:s.toString()};const d=await c(l);if(d.status===200)return!0;if(d.status===400&&d.data.message==="Account not verified")return!1;if(d.status===404&&d.data.message==="Account not found")return!1}catch(l){console.log("Account Check Error - ",l)}},$=async s=>{try{let l={phone:s.toString(),isExistingUser:!0};const d=await m(l);if(d.status===200)return!0;if(d.status===400&&d.data.message==="Error while sending OTP")return!1}catch(l){console.log("OTP Sending Error - ",l)}},U=async s=>{a.handleChange(s),s.target.value.length===10&&(await W(s.target.value)?r([...o,"pin"]):(r(["mobile"]),w(_(s.target.value.toString())),g("/signup")))},H=s=>{a.handleChange(s),s.target.value.length>=4&&s.target.value.length<=8?r([...o,"submit-btn"]):r(["mobile","pin"])},J=async()=>{const s=a.values.mobile;await $(s)&&(w(_(s)),g("/resetpin"))};return i.exports.useEffect(()=>{N.userAuthInfo.phoneNumber&&(a.setFieldValue("mobile",N.userAuthInfo.phoneNumber),r(["mobile","pin"]))},[N.userAuthInfo.phoneNumber]),T("div",{style:e,children:[n(he,{}),n("form",{onSubmit:a.handleSubmit,children:T("div",{style:{padding:"20px"},children:[o.includes("mobile")&&n("div",{children:n(A,{name:"mobile",placeholder:"Enter your mobile number",required:!0,size:"large",type:"number",contentBefore:n(le,{className:t["primary-icon"]}),value:a.values.mobile,onChange:s=>U(s),onInput:s=>a.setFieldTouched("mobile",!0),helperText:a.touched.mobile&&a.errors.mobile?a.errors.mobile:null,style:{marginBottom:"26px"}})}),o.includes("pin")&&T("div",{children:[n(A,{name:"pin",placeholder:"Enter your pin number",required:!0,size:"large",type:"password",contentBefore:n(fe,{className:t["primary-icon"]}),value:a.values.pin,onChange:s=>H(s),onInput:s=>a.setFieldTouched("pin",!0),helperText:a.touched.pin&&a.errors.pin?a.errors.pin:null,style:{marginBottom:"26px"}}),n("div",{style:{textAlign:"center",zoom:"143%"},children:n("a",{onClick:J,children:"Forgotten PIN?"})})]}),o.includes("submit-btn")&&n("div",{children:n(ce,{type:"submit",shape:"circular",appearance:"primary",size:"large",style:{marginTop:"26px",textAlign:"center",display:"block",marginLeft:"auto",marginRight:"auto",border:"none",zoom:"150%",backgroundColor:"transparent"},children:n(be,{className:t["secondary-icon"]})})})]})})]})};export{no as default};
